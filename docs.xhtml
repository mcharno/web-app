<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:t="http://myfaces.apache.org/tomahawk"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core">

    <body>

        <ui:composition template="./templates/template.xhtml">
            <ui:define name="title">documentation</ui:define>
            <ui:define name="head">
                <link type="text/css" href="resources/css/wiki.css" rel="stylesheet" />
<!--                <script type="text/javascript" src="resources/js/mootools.js"></script>
                <script type="text/javascript" src="resources/js/prettify.js"></script>
                <script type="text/javascript" src="resources/js/jspwiki-common.js"></script>
                <script type="text/javascript" src="resources/js/jspwiki-commonstyles.js"></script>-->
            </ui:define>

            <ui:param name="title" value="#{wikiPageBean.title}" />
            <ui:param name="contentClass" value="wikipage" />

            <ui:define name="content">
                <t:div rendered="#{userBean.auth and empty wikiPageBean.editedtext}" id="wiki-edit-button">
                    <a href="blog?page=#{wikiPageBean.page}&amp;edit=true">edit</a>
                </t:div>

                <c:choose>
                    <c:when test="#{!empty wikiPageBean.editedtext}">
                        <t:div rendered="#{userBean.auth}" id="wiki-edit">
                            <div id="edit-area">
                                <form action="" 
                                      id="editform" 
                                      enctype="application/x-www-form-urlencoded" >

                                    <p id="submitbuttons">
                                        <input name="page" type="hidden" value="#{wikiPageBean.page}" />
                                        <input name="action" type="hidden" value="save" />

                                        <input type="submit" name="ok" value="#{wiki.ok}" accesskey="s" title="#{wiki.ok}" />
                                        <input type="submit" name="cancel" value="#{wiki.cancel}" accesskey="q" title="#{wiki.cancel}" />
                                    </p>

                                    <div id="tools">
                                        <h4><h:outputText value="#{wiki.tools}" /></h4>
                                        <div id="toolbuttons">
                                            <span>
                                                <a href="#" class="tool" rel="" id="tbLink" title="#{wiki.link}"><t:outputText value="#{wiki.link}" /></a>
                                                <a href="#" class="tool" rel="break" id="tbH1" title="#{wiki.h1}"><t:outputText value="#{wiki.h1}" /></a>
                                                <a href="#" class="tool" rel="break" id="tbH2" title="#{wiki.h2}"><t:outputText value="#{wiki.h2}" /></a>
                                                <a href="#" class="tool" rel="break" id="tbH3" title="#{wiki.h3}"><t:outputText value="#{wiki.h3}" /></a>
                                            </span>
                                            <span>
                                                <a href="#" class="tool" rel="" id="tbB" title="#{wiki.bold}"><t:outputText value="#{wiki.bold}" /></a>
                                                <a href="#" class="tool" rel="" id="tbI" title="#{wiki.italic}"><t:outputText value="#{wiki.italic}" /></a>
                                                <a href="#" class="tool" rel="" id="tbMONO" title="#{wiki.mono}"><t:outputText value="#{wiki.mono}" /></a>
                                                <a href="#" class="tool" rel="" id="tbSUP" title="#{wiki.sup}"><t:outputText value="#{wiki.sup}" /></a>
                                                <a href="#" class="tool" rel="" id="tbSUB" title="#{wiki.sub}"><t:outputText value="#{wiki.sub}" /></a>
                                                <a href="#" class="tool" rel="" id="tbSTRIKE" title="#{wiki.strike}"><t:outputText value="#{wiki.strike}" /></a>
                                            </span>
                                            <span>
                                                <a href="#" class="tool" rel="" id="tbBR" title="#{wiki.br}">#{wiki.br}</a>
                                                <a href="#" class="tool" rel="break" id="tbHR" title="#{wiki.hr}">#{wiki.hr}</a>
                                                <a href="#" class="tool" rel="break" id="tbPRE" title="#{wiki.pre}">#{wiki.pre}</a>
                                                <a href="#" class="tool" rel="break" id="tbCODE" title="#{wiki.code}">#{wiki.code}</a>
                                                <a href="#" class="tool" rel="break" id="tbDL" title="#{wiki.dl}">#{wiki.dl}</a>
                                            </span>
                                            <span>
                                                <a href="#" class="tool" rel="break" id="tbTOC" title="#{wiki.toc}">#{wiki.toc}</a>
                                                <a href="#" class="tool" rel="break" id="tbTAB" title="#{wiki.tab}">#{wiki.tab}</a>
                                                <a href="#" class="tool" rel="break" id="tbTABLE" title="#{wiki.table}">#{wiki.table}</a>
                                                <a href="#" class="tool" rel="" id="tbIMG" title="#{wiki.img}">#{wiki.img}</a>
                                                <a href="#" class="tool" rel="break" id="tbQUOTE" title="#{wiki.quote}">#{wiki.quote}</a>
                                                <a href="#" class="tool" rel="break" id="tbSIGN" title="#{wiki.sign}">#{wiki.sign}</a>
                                            </span>
                                            <span>
                                                <a href="#" class="tool" rel="break" id="tbUNDO" title="#{wiki.undo}">#{wiki.undo}</a>
                                            </span>
                                            <span>
                                                <a href="#" class="tool" rel="break" id="tbREDO" title="#{wiki.redo}">#{wiki.redo}</a>
                                            </span>
                                        </div>

                                        <div id="searchbar">
                                            <span>
                                                <label for="tbFIND" >#{wiki.find}</label>
                                                <input type="text"   name="tbFIND" id="tbFIND" size="16" />
                                                <label for="tbREPLACE" >#{wiki.replace}</label>
                                                <input type="text"   name="tbREPLACE" id="tbREPLACE" size="16" />
                                                <input type="button" name="doreplace" id="doreplace" value="#{wiki.find}" />
                                            </span>
                                            <span>
                                                <input type="checkbox" name="tbMatchCASE" id="tbMatchCASE" />
                                                <label for="tbMatchCASE">#{wiki.matchCase}</label>
                                            </span>
                                            <span>
                                                <input type="checkbox" name="tbREGEXP" id="tbREGEXP" />
                                                <label for="tbREGEXP" >#{wiki.regex}</label>
                                            </span>
                                            <span>
                                                <input type="checkbox" name="tbGLOBAL" id="tbGLOBAL" checked="checked" />
                                                <label for="tbGLOBAL">#{wiki.global}</label>
                                            </span>
                                        </div>
                                        <div class="clearbox" ></div>
                                    </div>

                                    <div>
                                        <textarea id="editorarea" name="editedtext" class="editor" rows="30" cols="100">#{wikiPageBean.editedtext}</textarea>
                                        <div class="clearbox" ></div>
                                    </div>
                                </form>
                            </div>
                        </t:div>
                        <t:div rendered="#{!userBean.auth}">
                            <h2>Restricted Access</h2>
                            <div class="error">
                                <p>Only authorized users can edit page content. An email has been sent to notify charno.net.</p>
                            </div>
                            <br />
                        </t:div>
                    </c:when>
                    <c:otherwise>
                        <div id="wiki-content">
                            <t:outputText escape="false" value="#{wikiPageBean.content}" />
                        </div>
                    </c:otherwise>
                </c:choose>

            </ui:define>

        </ui:composition>

    </body>
</html>
